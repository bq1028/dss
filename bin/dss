#!/usr/bin/env

const fs = require('fs')
const dss = require('..')

const read = filename => fs.readFileSync(filename, 'utf-8')

const [dist, ...jsSheets] = process.argv.slice(2)

jsSheets.map(read).map(dss).forEach((compiled, i) => {
  fs.writeFileSync(
    path.resolve(path.join(dist, path.basename(jsSheets[i])+'.json')),
    JSON.stringify(compiled, null, 2)
  )
})

fs.writeFileSync(path.resolve(path.join(dist, 'index.css')), dss.css())
